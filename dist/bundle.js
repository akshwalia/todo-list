(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var n=e.g.document;if(!t&&n&&(n.currentScript&&(t=n.currentScript.src),!t)){var o=n.getElementsByTagName("script");if(o.length)for(var d=o.length-1;d>-1&&!t;)t=o[d--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})(),e.d({},{O:()=>G,w:()=>J});const t=e.p+"de7ced177d66bb006694.svg",n=e.p+"c2e6e6dd118d33c26922.svg";let o=1;const d=document.querySelector(".tasks"),c=document.querySelector(".rightpanelheading");function r(e){const c=document.createElement("div");c.classList.add("task");const r=document.createElement("input");r.type="checkbox",r.id=`${o}`,r.classList.add("checkbox");const i=document.createElement("label");i.setAttribute("for",`${o}`),i.innerHTML=`${e.name}`;let s=document.createElement("img");"yes"===e.important?s.src=t:s.src=n,s.classList.add("important");const a=document.createElement("div");a.innerHTML=`${e.date}`||"--",a.classList.add("date"),o++,c.appendChild(r),c.appendChild(i),c.appendChild(s),c.appendChild(a),d.appendChild(c),s.addEventListener("click",(()=>{"no"===e.important?(s.src=t,e.important="yes"):(s.src=n,e.important="no")})),"yes"==e.completed&&(i.style.textDecoration="line-through",c.style.backgroundColor="#d4d4d4",r.checked=!0),r.addEventListener("click",(()=>{1==r.checked?(i.style.textDecoration="line-through",c.style.backgroundColor="#d4d4d4",e.completed="yes"):(i.style.textDecoration="none",c.style.backgroundColor="rgb(222, 222, 252)",e.completed="no")}))}function i(){document.querySelectorAll(".options");const e=document.querySelector(".active");let t=[];for(let n of J)e.innerHTML==n.projectname&&t.push(n);if(t.length){c.innerHTML=`${e.innerHTML}`,d.innerHTML="";for(let e of t)r(e)}else d.innerHTML="",f(e.innerHTML)}function s(e,t,n,o,d){return{name:e,projectname:t,important:n,date:o,completed:d}}const a=document.querySelector(".rightpanel"),l=document.querySelector(".rightpanelheading"),u=document.querySelector(".tasks");u.innerHTML="";const m=document.createElement("div");m.classList.add("addtask"),m.innerHTML="+";let p=!0;const L=document.querySelector(".popupcontainer");let h=!0;function f(e){l.innerHTML=`${e}`,u.innerHTML="",p&&(p=!1,a.appendChild(m)),m.addEventListener("click",(()=>{!function(){h=!0,L.classList.remove("hidden");const e=document.querySelector(".formbox"),t=document.querySelector(".buttons");t.innerHTML="";const n=document.createElement("button"),o=document.createElement("button");n.innerHTML="Add",o.innerHTML="Cancel",o.setAttribute("type","button"),n.setAttribute("type","button"),t.appendChild(n),t.appendChild(o),n.addEventListener("click",(()=>{!function(){const e=document.querySelector(".active"),t=document.getElementById("title"),n=document.getElementById("important"),o=document.getElementById("date"),d=new s(t.value,e.innerHTML,n.value,o.value,"no");J.push(d),t.value="",n.value="no",o.value=""}(),L.classList.add("hidden"),h=!1,i()})),o.addEventListener("click",(e=>{L.classList.add("hidden")})),document.addEventListener("keydown",(e=>{h&&"Enter"===e.key&&n.click()})),e.addEventListener("click",(e=>{e.stopPropagation()})),L.addEventListener("click",(e=>{e.stopPropagation(),L.classList.add("hidden")}))}()}))}let y=0,g=document.querySelectorAll(".option");function T(){g.forEach((e=>{e.classList.remove("selected")}))}function k(){document.querySelector(".active").classList.remove("active")}const v=document.querySelector(".projectcontainer");let E=!0,H=!0;function M(){if(E){const e=document.createElement("input");e.setAttribute("type","text"),e.setAttribute("id","inputbox"),e.style.margin="8px 12px";const t=document.createElement("projecticon");t.classList.add("projecticon"),t.style.backgroundColor=`${G[y]}`,y++,6==y&&(y=0);const n=document.createElement("div"),o=document.createElement("div");o.classList.add("option"),o.classList.add("projectoption"),v.appendChild(e),e.focus(),E=!1;let d=!1;document.addEventListener("keydown",(c=>{"Enter"!=c.key||""===e.value||d||(n.innerHTML=`${e.value}`,v.removeChild(e),E=!0,o.appendChild(t),o.appendChild(n),v.appendChild(o),g=document.querySelectorAll(".option"),T(),H||k(),o.classList.add("selected"),n.classList.add("active"),H=!1,f(e.value),d=!0,document.removeEventListener("keydown",(()=>{})))})),o.addEventListener("click",(()=>{T(),k(),o.classList.add("selected"),n.classList.add("active"),J.length?i():f(document.querySelector(".active").innerHTML)}))}else v.removeChild(document.getElementById("inputbox")),E=!0}const b=document.querySelector(".rightpanelheading"),S=document.querySelector(".tasks");let q=[];function C(e){if(b.innerHTML="Your Today's Tasks",S.innerHTML="",e.length){S.innerHTML="";const t=new Date;q=[];for(let n of e){const e=new Date(n.date);t.toDateString()==e.toDateString()&&q.push(n)}if(q.length){S.innerHTML="";for(let e of q)r(e)}else S.innerHTML="No tasks scheduled for today"}else{S.innerHTML="No Task here, add a project and add tasks to get started";const e=document.createElement("div");e.innerHTML="+ Add Project",e.classList.add("addprojectfresh"),S.appendChild(e),e.addEventListener("click",M)}}const w=document.querySelector(".rightpanelheading"),j=document.querySelector(".tasks");let A=[];const x=document.querySelector(".rightpanelheading"),D=document.querySelector(".tasks");let $=[];const B=document.querySelector(".rightpanelheading"),I=document.querySelector(".tasks");let N=[];const P=document.getElementById("today"),O=document.getElementById("thisweek"),F=document.getElementById("importantmenu"),Y=document.getElementById("completed"),z=document.querySelector(".addproject"),G=["#ffaeae","#ffee93","#ffc09f","#a39fe1","#fcf5c7","#a0ced9","#adf7b6"];let J=[];C(J),P.addEventListener("click",(()=>{T(),P.classList.add("selected"),C(J)})),O.addEventListener("click",(()=>{T(),O.classList.add("selected"),function(e){if(w.innerHTML="Tasks for this week",j.innerHTML="",e.length){A=[],j.innerHTML="";const t=new Date,n=t.getDay(),o=t.getTime()-864e5*n,d=t.getTime()+864e5*(7-n);for(let t of e){const e=new Date(t.date);e.getTime()>o&&e.getTime()<d&&A.push(t)}if(A.length){j.innerHTML="";for(let e of A)r(e)}else j.innerHTML="No tasks scheduled for this week"}else{j.innerHTML="No Task here, add a project and add tasks to get started";const e=document.createElement("div");e.innerHTML="+ Add Project",e.classList.add("addprojectfresh"),j.appendChild(e),e.addEventListener("click",M)}}(J)})),F.addEventListener("click",(()=>{T(),F.classList.add("selected"),function(e){if(x.innerHTML="Important Tasks",D.innerHTML="",e.length){D.innerHTML="",$=[];for(let t of e)new Date(t.date),"yes"==t.important&&$.push(t);if($.length){D.innerHTML="";for(let e of $)r(e)}else D.innerHTML="No tasks marked as important"}else{D.innerHTML="No Task here, add a project and add tasks to get started";const e=document.createElement("div");e.innerHTML="+ Add Project",e.classList.add("addprojectfresh"),D.appendChild(e),e.addEventListener("click",M)}}(J)})),Y.addEventListener("click",(()=>{T(),Y.classList.add("selected"),function(e){if(B.innerHTML="Completed Tasks",I.innerHTML="",e.length){N=[],I.innerHTML="";for(let t of e)"yes"==t.completed&&N.push(t);if(N.length){I.innerHTML="";for(let e of N)r(e)}else I.innerHTML="No tasks completed"}else I.innerHTML="No tasks completed"}(J)})),z.addEventListener("click",M)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RVRJMkIsQ0FBa0J6RCxFQUFNLElBRzVCVCxFQUFVRCxpQkFBaUIsU0FBUyxLQUNoQ2tDLElBQ0FqQyxFQUFVYixVQUFVQyxJQUFJLFlEN0JiLFNBQTJCcUIsR0FHdEMsR0FGQSxFQUFRZixVQUFZLGtCQUNwQixFQUFjQSxVQUFZLEdBQ3RCZSxFQUFNbEMsT0FHTCxDQUNEbUYsRUFBaUIsR0FDakIsRUFBY2hFLFVBQVksR0FFMUIsSUFBSSxJQUFJVixLQUFReUIsRUFDUyxPQUFsQnpCLEVBQUtnQixXQUNKMEQsRUFBZS9DLEtBQUszQixHQUk1QixHQUFJMEUsRUFBZW5GLE9BR2QsQ0FDRCxFQUFjbUIsVUFBWSxHQUMxQixJQUFJLElBQUlrQixLQUFZOEMsRUFDaEIzRSxFQUFxQjZCLEVBRTdCLE1BUEksRUFBY2xCLFVBQVksb0JBUWxDLE1BckJJLEVBQWNBLFVBQVksb0JBc0JsQyxDQ0lJeUUsQ0FBa0IxRCxFQUFNLElBRzVCOEMsRUFBV3hELGlCQUFpQixRQUFTd0MsRSIsInNvdXJjZXMiOlsid2VicGFjazovL3RvZG8tbGlzdC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly90b2RvLWxpc3Qvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3RvZG8tbGlzdC93ZWJwYWNrL3J1bnRpbWUvZ2xvYmFsIiwid2VicGFjazovL3RvZG8tbGlzdC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3RvZG8tbGlzdC93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvdXBkYXRpbmdUYXNrcy5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvdGFza01hbmlwdWxhdGlvbi5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvcHJvamVjdFBhZ2UuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL2FkZHJlbW92ZVByb2plY3RzLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy90b2RheS5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvdGhpc3dlZWsuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL2ltcG9ydGFudC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvY29tcGxldGVkLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5nID0gKGZ1bmN0aW9uKCkge1xuXHRpZiAodHlwZW9mIGdsb2JhbFRoaXMgPT09ICdvYmplY3QnKSByZXR1cm4gZ2xvYmFsVGhpcztcblx0dHJ5IHtcblx0XHRyZXR1cm4gdGhpcyB8fCBuZXcgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JykgcmV0dXJuIHdpbmRvdztcblx0fVxufSkoKTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwidmFyIHNjcmlwdFVybDtcbmlmIChfX3dlYnBhY2tfcmVxdWlyZV9fLmcuaW1wb3J0U2NyaXB0cykgc2NyaXB0VXJsID0gX193ZWJwYWNrX3JlcXVpcmVfXy5nLmxvY2F0aW9uICsgXCJcIjtcbnZhciBkb2N1bWVudCA9IF9fd2VicGFja19yZXF1aXJlX18uZy5kb2N1bWVudDtcbmlmICghc2NyaXB0VXJsICYmIGRvY3VtZW50KSB7XG5cdGlmIChkb2N1bWVudC5jdXJyZW50U2NyaXB0KVxuXHRcdHNjcmlwdFVybCA9IGRvY3VtZW50LmN1cnJlbnRTY3JpcHQuc3JjO1xuXHRpZiAoIXNjcmlwdFVybCkge1xuXHRcdHZhciBzY3JpcHRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzY3JpcHRcIik7XG5cdFx0aWYoc2NyaXB0cy5sZW5ndGgpIHtcblx0XHRcdHZhciBpID0gc2NyaXB0cy5sZW5ndGggLSAxO1xuXHRcdFx0d2hpbGUgKGkgPiAtMSAmJiAhc2NyaXB0VXJsKSBzY3JpcHRVcmwgPSBzY3JpcHRzW2ktLV0uc3JjO1xuXHRcdH1cblx0fVxufVxuLy8gV2hlbiBzdXBwb3J0aW5nIGJyb3dzZXJzIHdoZXJlIGFuIGF1dG9tYXRpYyBwdWJsaWNQYXRoIGlzIG5vdCBzdXBwb3J0ZWQgeW91IG11c3Qgc3BlY2lmeSBhbiBvdXRwdXQucHVibGljUGF0aCBtYW51YWxseSB2aWEgY29uZmlndXJhdGlvblxuLy8gb3IgcGFzcyBhbiBlbXB0eSBzdHJpbmcgKFwiXCIpIGFuZCBzZXQgdGhlIF9fd2VicGFja19wdWJsaWNfcGF0aF9fIHZhcmlhYmxlIGZyb20geW91ciBjb2RlIHRvIHVzZSB5b3VyIG93biBsb2dpYy5cbmlmICghc2NyaXB0VXJsKSB0aHJvdyBuZXcgRXJyb3IoXCJBdXRvbWF0aWMgcHVibGljUGF0aCBpcyBub3Qgc3VwcG9ydGVkIGluIHRoaXMgYnJvd3NlclwiKTtcbnNjcmlwdFVybCA9IHNjcmlwdFVybC5yZXBsYWNlKC8jLiokLywgXCJcIikucmVwbGFjZSgvXFw/LiokLywgXCJcIikucmVwbGFjZSgvXFwvW15cXC9dKyQvLCBcIi9cIik7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBzY3JpcHRVcmw7IiwiaW1wb3J0IHsgdGFza3MgfSBmcm9tIFwiLi9pbmRleFwiO1xuaW1wb3J0IGRpc3BsYXlTdGFydFByb2plY3RQYWdlIGZyb20gXCIuL3Byb2plY3RQYWdlXCI7XG5cbmltcG9ydCBzdGFyRnVsbCBmcm9tICcuL2ltYWdlcy9zdGFyLnN2Zyc7XG5pbXBvcnQgc3Rhck91dGxpbmUgZnJvbSAnLi9pbWFnZXMvc3Rhci1vdXRsaW5lLnN2ZydcblxubGV0IGkgPSAxO1xuXG5jb25zdCB0YXNrY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRhc2tzJyk7XG5jb25zdCBoZWFkaW5nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnJpZ2h0cGFuZWxoZWFkaW5nJyk7XG5cbmZ1bmN0aW9uIGRpc3BsYXlUYXNrc09uU2NyZWVuKHRhc2spIHtcbiAgICBjb25zdCB0YXNrcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGFza3Jvdy5jbGFzc0xpc3QuYWRkKCd0YXNrJyk7XG5cbiAgICBjb25zdCBjaGVja2JveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgY2hlY2tib3gudHlwZSA9IFwiY2hlY2tib3hcIjtcbiAgICBjaGVja2JveC5pZCA9IGAke2l9YDtcbiAgICBjaGVja2JveC5jbGFzc0xpc3QuYWRkKCdjaGVja2JveCcpO1xuICAgIGNvbnN0IGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcbiAgICBsYWJlbC5zZXRBdHRyaWJ1dGUoJ2ZvcicsIGAke2l9YCk7XG4gICAgbGFiZWwuaW5uZXJIVE1MID0gYCR7dGFzay5uYW1lfWA7XG4gICAgbGV0IGltcG9ydGFudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgIFxuICAgIGlmICh0YXNrLmltcG9ydGFudCA9PT0gJ3llcycpIHtcbiAgICAgICAgaW1wb3J0YW50LnNyYyA9IHN0YXJGdWxsO1xuICAgIH1cbiAgICBlbHNlXG4gICAgICAgIGltcG9ydGFudC5zcmMgPSBzdGFyT3V0bGluZTtcblxuICAgIGltcG9ydGFudC5jbGFzc0xpc3QuYWRkKCdpbXBvcnRhbnQnKTtcbiAgICBjb25zdCBkYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZGF0ZS5pbm5lckhUTUwgPSBgJHt0YXNrLmRhdGV9YCB8fCAnLS0nO1xuICAgIGRhdGUuY2xhc3NMaXN0LmFkZCgnZGF0ZScpO1xuICAgIGkrKztcblxuICAgIHRhc2tyb3cuYXBwZW5kQ2hpbGQoY2hlY2tib3gpO1xuICAgIHRhc2tyb3cuYXBwZW5kQ2hpbGQobGFiZWwpO1xuICAgIHRhc2tyb3cuYXBwZW5kQ2hpbGQoaW1wb3J0YW50KTtcbiAgICB0YXNrcm93LmFwcGVuZENoaWxkKGRhdGUpO1xuXG4gICAgdGFza2NvbnRhaW5lci5hcHBlbmRDaGlsZCh0YXNrcm93KTtcblxuICAgIGltcG9ydGFudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgaWYgKHRhc2suaW1wb3J0YW50ID09PSAnbm8nKSB7XG4gICAgICAgICAgICBpbXBvcnRhbnQuc3JjID0gc3RhckZ1bGw7XG4gICAgICAgICAgICB0YXNrLmltcG9ydGFudCA9ICd5ZXMnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaW1wb3J0YW50LnNyYyA9IHN0YXJPdXRsaW5lO1xuICAgICAgICAgICAgdGFzay5pbXBvcnRhbnQgPSAnbm8nO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBpZih0YXNrLmNvbXBsZXRlZCA9PSAneWVzJykge1xuICAgICAgICBsYWJlbC5zdHlsZS50ZXh0RGVjb3JhdGlvbiA9IFwibGluZS10aHJvdWdoXCI7XG4gICAgICAgIHRhc2tyb3cuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCIjZDRkNGQ0XCI7XG4gICAgICAgIGNoZWNrYm94LmNoZWNrZWQgPSB0cnVlO1xuICAgIH1cbiAgICBcbiAgICBcblxuICAgIGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBpZiAoY2hlY2tib3guY2hlY2tlZCA9PSB0cnVlKSB7XG4gICAgICAgICAgICBsYWJlbC5zdHlsZS50ZXh0RGVjb3JhdGlvbiA9IFwibGluZS10aHJvdWdoXCI7XG4gICAgICAgICAgICB0YXNrcm93LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwiI2Q0ZDRkNFwiO1xuICAgICAgICAgICAgdGFzay5jb21wbGV0ZWQgPSAneWVzJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxhYmVsLnN0eWxlLnRleHREZWNvcmF0aW9uID0gXCJub25lXCI7XG4gICAgICAgICAgICB0YXNrcm93LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwicmdiKDIyMiwgMjIyLCAyNTIpXCI7XG4gICAgICAgICAgICB0YXNrLmNvbXBsZXRlZCA9ICdubyc7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXBkYXRlUGFuZWwoKSB7XG4gICAgY29uc3QgbWVudW9wdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcub3B0aW9ucycpO1xuXG4gICAgY29uc3QgY3VycmVudGx5U2VsZWN0ZWRQcm9qZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFjdGl2ZScpOyAgLy9leHRyYWN0cyB0aGUgbmFtZSBvZiB0aGUgY3VycmVudGx5IHNlbGVjdGVkIHByb2plY3RcblxuICAgIGxldCB0YXNrc0luQ3VycmVudGx5U2VsZWN0ZWRQcm9qZWN0ID0gW107XG5cbiAgICBmb3IgKGxldCB0YXNrIG9mIHRhc2tzKSB7XG4gICAgICAgIGlmIChjdXJyZW50bHlTZWxlY3RlZFByb2plY3QuaW5uZXJIVE1MID09IHRhc2sucHJvamVjdG5hbWUpIHtcbiAgICAgICAgICAgIHRhc2tzSW5DdXJyZW50bHlTZWxlY3RlZFByb2plY3QucHVzaCh0YXNrKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmICghdGFza3NJbkN1cnJlbnRseVNlbGVjdGVkUHJvamVjdC5sZW5ndGgpIHtcbiAgICAgICAgdGFza2NvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xuICAgICAgICBkaXNwbGF5U3RhcnRQcm9qZWN0UGFnZShjdXJyZW50bHlTZWxlY3RlZFByb2plY3QuaW5uZXJIVE1MKTtcbiAgICB9XG5cbiAgICBlbHNlIHtcbiAgICAgICAgaGVhZGluZy5pbm5lckhUTUwgPSBgJHtjdXJyZW50bHlTZWxlY3RlZFByb2plY3QuaW5uZXJIVE1MfWA7XG4gICAgICAgIHRhc2tjb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcbiAgICAgICAgZm9yIChsZXQgZWFjaHRhc2sgb2YgdGFza3NJbkN1cnJlbnRseVNlbGVjdGVkUHJvamVjdCkge1xuICAgICAgICAgICAgZGlzcGxheVRhc2tzT25TY3JlZW4oZWFjaHRhc2spO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgeyBkaXNwbGF5VGFza3NPblNjcmVlbiB9OyIsImltcG9ydCB7IHRhc2tzIH0gZnJvbSBcIi4vaW5kZXhcIjtcbmltcG9ydCB1cGRhdGVQYW5lbCBmcm9tIFwiLi91cGRhdGluZ1Rhc2tzXCI7XG5cblxuZnVuY3Rpb24gY3JlYXRlVGFza09iamVjdChuYW1lLCBwcm9qZWN0bmFtZSwgaW1wb3J0YW50LCBkYXRlLCBjb21wbGV0ZWQpIHtcbiAgICByZXR1cm4geyBuYW1lLCBwcm9qZWN0bmFtZSwgaW1wb3J0YW50LCBkYXRlLCBjb21wbGV0ZWQgfTtcbn1cblxuZnVuY3Rpb24gYWRkVGFza09iamVjdCgpIHtcbiAgICBjb25zdCBjdXJyZW50bHlTZWxlY3RlZFByb2plY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWN0aXZlJyk7XG5cbiAgICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aXRsZScpO1xuICAgIGNvbnN0IGltcG9ydGFudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbXBvcnRhbnQnKTtcbiAgICBjb25zdCBkYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RhdGUnKTtcblxuICAgIGNvbnN0IG5ld3Rhc2sgPSBuZXcgY3JlYXRlVGFza09iamVjdCh0aXRsZS52YWx1ZSxjdXJyZW50bHlTZWxlY3RlZFByb2plY3QuaW5uZXJIVE1MLGltcG9ydGFudC52YWx1ZSxkYXRlLnZhbHVlLCdubycpO1xuXG4gICAgdGFza3MucHVzaChuZXd0YXNrKTtcblxuICAgIHRpdGxlLnZhbHVlPVwiXCI7XG4gICAgaW1wb3J0YW50LnZhbHVlPVwibm9cIjtcbiAgICBkYXRlLnZhbHVlPVwiXCI7XG59XG5cbmV4cG9ydCB7IGFkZFRhc2tPYmplY3QgfTsiLCJpbXBvcnQgeyB0YXNrcyB9IGZyb20gXCIuL2luZGV4XCI7XG5pbXBvcnQgeyBhZGRUYXNrT2JqZWN0IH0gZnJvbSBcIi4vdGFza01hbmlwdWxhdGlvblwiO1xuaW1wb3J0IHVwZGF0ZVBhbmVsIGZyb20gXCIuL3VwZGF0aW5nVGFza3NcIjtcblxuY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnJpZ2h0cGFuZWwnKTtcbmNvbnN0IGhlYWRpbmcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucmlnaHRwYW5lbGhlYWRpbmcnKTtcblxuY29uc3QgdGFza2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50YXNrcycpO1xudGFza2NvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xuXG5jb25zdCBhZGRUYXNrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5hZGRUYXNrLmNsYXNzTGlzdC5hZGQoJ2FkZHRhc2snKTtcbmFkZFRhc2suaW5uZXJIVE1MID0gXCIrXCI7XG5sZXQgZmlyc3QgPSB0cnVlO1xuY29uc3QgcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBjb250YWluZXInKTtcblxubGV0IHByZXNlbnQgPSB0cnVlO1xuXG5cbmZ1bmN0aW9uIGFkZFRhc2tQb3B1cCgpIHtcbiAgICBwcmVzZW50ID0gdHJ1ZTtcblxuICAgIHBvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuXG4gICAgY29uc3QgZm9ybWJveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtYm94Jyk7XG5cbiAgICBjb25zdCBidXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1dHRvbnMnKTtcblxuICAgIGJ1dHRvbnMuaW5uZXJIVE1MID0gXCJcIjtcblxuICAgIGNvbnN0IGFkZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIGNvbnN0IGNhbmNlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIGFkZC5pbm5lckhUTUwgPSBcIkFkZFwiO1xuICAgIGNhbmNlbC5pbm5lckhUTUwgPSBcIkNhbmNlbFwiO1xuXG4gICAgY2FuY2VsLnNldEF0dHJpYnV0ZSgndHlwZScsICdidXR0b24nKTtcbiAgICBhZGQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ2J1dHRvbicpO1xuXG4gICAgYnV0dG9ucy5hcHBlbmRDaGlsZChhZGQpO1xuICAgIGJ1dHRvbnMuYXBwZW5kQ2hpbGQoY2FuY2VsKTtcblxuICAgIC8vc2VuZHMgZm9yIG9iamVjdCBjcmVhdGlvbiBhbmQgYWRkaXRpb25cbiAgICBhZGQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGFkZFRhc2tPYmplY3QoKTtcbiAgICAgICAgcG9wdXAuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgIHByZXNlbnQgPSBmYWxzZTtcbiAgICAgICAgdXBkYXRlUGFuZWwoKTtcbiAgICB9KTtcblxuICAgIC8vY2FuY2VsIGJ1dHRvbiByZW1vdmVzIHRoZSBvdmVybGF5XG4gICAgY2FuY2VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgcG9wdXAuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgfSk7XG5cbiAgICAvL2xpbmtzIGVudGVyICBrZXkgdG8gYWRkIGJ1dHRvblxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4ge1xuICAgICAgICBpZiAocHJlc2VudCkge1xuICAgICAgICAgICAgaWYgKGUua2V5ID09PSBcIkVudGVyXCIpIHtcbiAgICAgICAgICAgICAgICBhZGQuY2xpY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy9wcmV2ZW50cyBidWJibGluZ1xuICAgIGZvcm1ib3guYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH0pO1xuICAgICAvL292ZXJsYXkgY2xvc2VzIHdoZW4gY2xpY2tlZCBvbiBiYWNrZ3JvdW5kXG4gICAgcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICBwb3B1cC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICB9KTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZGlzcGxheVN0YXJ0UHJvamVjdFBhZ2UobmFtZSkge1xuICAgIGhlYWRpbmcuaW5uZXJIVE1MID0gYCR7bmFtZX1gO1xuICAgIHRhc2tjb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcblxuICAgIGlmIChmaXJzdCkge1xuICAgICAgICBmaXJzdCA9IGZhbHNlO1xuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoYWRkVGFzayk7XG4gICAgfVxuXG4gICAgYWRkVGFzay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgYWRkVGFza1BvcHVwKCk7XG4gICAgfSk7XG5cbn0iLCJpbXBvcnQgeyBjb2xvcnMsIHRhc2tzIH0gZnJvbSBcIi4vaW5kZXhcIjtcbmltcG9ydCBkaXNwbGF5U3RhcnRQcm9qZWN0UGFnZSBmcm9tIFwiLi9wcm9qZWN0UGFnZVwiO1xuaW1wb3J0IHVwZGF0ZVBhbmVsIGZyb20gXCIuL3VwZGF0aW5nVGFza3NcIjtcblxubGV0IGk9MDtcblxubGV0IG9wdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcub3B0aW9uJyk7XG5cbmZ1bmN0aW9uIHJlbW92ZVNlbGVjdGVkQ2xhc3MoKSB7XG4gICAgb3B0aW9ucy5mb3JFYWNoKG9wdCA9PiB7XG4gICAgICAgIG9wdC5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZCcpO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiByZW1vdmVBY3RpdmVDbGFzcygpIHtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWN0aXZlJykuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG59XG5cbmNvbnN0IHByb2plY3RDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdGNvbnRhaW5lcicpO1xuXG5sZXQgbm90UHJlc2VudCA9IHRydWU7XG5sZXQgZmlyc3Q9dHJ1ZTtcblxuZnVuY3Rpb24gYWRkTmV3UHJvamVjdCgpIHtcbiAgICBpZiAobm90UHJlc2VudCkge1xuICAgICAgICBjb25zdCBpbnB1dGJveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0JylcbiAgICAgICAgaW5wdXRib3guc2V0QXR0cmlidXRlKCd0eXBlJywgJ3RleHQnKTtcbiAgICAgICAgaW5wdXRib3guc2V0QXR0cmlidXRlKCdpZCcsICdpbnB1dGJveCcpXG4gICAgICAgIGlucHV0Ym94LnN0eWxlLm1hcmdpbiA9IFwiOHB4IDEycHhcIjtcblxuICAgICAgICBjb25zdCBwcm9qZWN0aWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3Byb2plY3RpY29uJyk7XG4gICAgICAgIHByb2plY3RpY29uLmNsYXNzTGlzdC5hZGQoJ3Byb2plY3RpY29uJyk7XG4gICAgICAgIHByb2plY3RpY29uLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGAke2NvbG9yc1tpXX1gO1xuICAgICAgICBpKys7XG4gICAgICAgIGlmKGk9PTYpXG4gICAgICAgICAgICBpPTA7XG5cbiAgICAgICAgY29uc3QgcHJvamVjdG5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgICAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgb3B0aW9uLmNsYXNzTGlzdC5hZGQoJ29wdGlvbicpO1xuICAgICAgICBvcHRpb24uY2xhc3NMaXN0LmFkZCgncHJvamVjdG9wdGlvbicpO1xuXG5cbiAgICAgICAgcHJvamVjdENvbnRhaW5lci5hcHBlbmRDaGlsZChpbnB1dGJveCk7XG5cbiAgICAgICAgaW5wdXRib3guZm9jdXMoKTtcblxuICAgICAgICBub3RQcmVzZW50ID0gZmFsc2U7XG5cbiAgICAgICAgbGV0IGRvbmUgPSBmYWxzZTtcblxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHtcbiAgICAgICAgICAgIGlmIChlLmtleSA9PSBcIkVudGVyXCIgJiYgaW5wdXRib3gudmFsdWUgIT09IFwiXCIgJiYgIWRvbmUpIHtcbiAgICAgICAgICAgICAgICBwcm9qZWN0bmFtZS5pbm5lckhUTUwgPSBgJHtpbnB1dGJveC52YWx1ZX1gO1xuICAgICAgICAgICAgICAgIHByb2plY3RDb250YWluZXIucmVtb3ZlQ2hpbGQoaW5wdXRib3gpO1xuICAgICAgICAgICAgICAgIG5vdFByZXNlbnQgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgb3B0aW9uLmFwcGVuZENoaWxkKHByb2plY3RpY29uKTtcbiAgICAgICAgICAgICAgICBvcHRpb24uYXBwZW5kQ2hpbGQocHJvamVjdG5hbWUpO1xuXG4gICAgICAgICAgICAgICAgcHJvamVjdENvbnRhaW5lci5hcHBlbmRDaGlsZChvcHRpb24pO1xuICAgICAgICAgICAgICAgIFxuXG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5vcHRpb24nKTtcblxuICAgICAgICAgICAgICAgIHJlbW92ZVNlbGVjdGVkQ2xhc3MoKTtcbiAgICAgICAgICAgICAgICBpZighZmlyc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlQWN0aXZlQ2xhc3MoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgb3B0aW9uLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7XG4gICAgICAgICAgICAgICAgcHJvamVjdG5hbWUuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZmlyc3Q9ZmFsc2U7XG4gICAgICAgICAgICAgICAgZGlzcGxheVN0YXJ0UHJvamVjdFBhZ2UoaW5wdXRib3gudmFsdWUpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGRvbmUgPXRydWU7XG5cbiAgICAgICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKCkgPT4ge30pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBvcHRpb24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICByZW1vdmVTZWxlY3RlZENsYXNzKCk7XG4gICAgICAgICAgICByZW1vdmVBY3RpdmVDbGFzcygpO1xuICAgICAgICAgICAgb3B0aW9uLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7XG4gICAgICAgICAgICBwcm9qZWN0bmFtZS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYoIXRhc2tzLmxlbmd0aClcbiAgICAgICAgICAgICAgICBkaXNwbGF5U3RhcnRQcm9qZWN0UGFnZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWN0aXZlJykuaW5uZXJIVE1MKTtcbiAgICAgICAgICAgIGVsc2UgXG4gICAgICAgICAgICAgICAgdXBkYXRlUGFuZWwoKTtcbiAgICAgICAgfSlcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHByb2plY3RDb250YWluZXIucmVtb3ZlQ2hpbGQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lucHV0Ym94JykpO1xuICAgICAgICBub3RQcmVzZW50PXRydWU7XG4gICAgfVxufVxuXG5leHBvcnQge3JlbW92ZVNlbGVjdGVkQ2xhc3MsYWRkTmV3UHJvamVjdH07IiwiaW1wb3J0IHsgYWRkTmV3UHJvamVjdCB9IGZyb20gXCIuL2FkZHJlbW92ZVByb2plY3RzXCI7XG5pbXBvcnQgeyB0YXNrcyB9IGZyb20gXCIuL2luZGV4XCI7XG5pbXBvcnQgeyBkaXNwbGF5VGFza3NPblNjcmVlbiB9IGZyb20gXCIuL3VwZGF0aW5nVGFza3NcIjtcblxuY29uc3QgaGVhZGluZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5yaWdodHBhbmVsaGVhZGluZycpO1xuXG5jb25zdCB0YXNrY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRhc2tzJyk7XG5cbmxldCB0b2RheVRhc2tzID0gW107XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHNob3dUb2RheVBhZ2UodGFza3MpIHtcbiAgICBoZWFkaW5nLmlubmVySFRNTCA9IFwiWW91ciBUb2RheSdzIFRhc2tzXCI7XG4gICAgdGFza2NvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xuICAgIGlmKCF0YXNrcy5sZW5ndGgpIHtcbiAgICAgICAgdGFza2NvbnRhaW5lci5pbm5lckhUTUwgPSBcIk5vIFRhc2sgaGVyZSwgYWRkIGEgcHJvamVjdCBhbmQgYWRkIHRhc2tzIHRvIGdldCBzdGFydGVkXCJcbiAgICAgICAgY29uc3QgYWRkcHJvamVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBhZGRwcm9qZWN0LmlubmVySFRNTCA9IFwiKyBBZGQgUHJvamVjdFwiO1xuICAgICAgICBhZGRwcm9qZWN0LmNsYXNzTGlzdC5hZGQoJ2FkZHByb2plY3RmcmVzaCcpO1xuICAgICAgICB0YXNrY29udGFpbmVyLmFwcGVuZENoaWxkKGFkZHByb2plY3QpO1xuXG4gICAgICAgIGFkZHByb2plY3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhZGROZXdQcm9qZWN0KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRhc2tjb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcbiAgICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuICAgICAgICB0b2RheVRhc2tzID0gW107XG4gICAgICAgIFxuICAgICAgICBmb3IobGV0IHRhc2sgb2YgdGFza3MpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhc2tkYXRlID0gbmV3IERhdGUodGFzay5kYXRlKTtcbiAgICAgICAgICAgIGlmKHRvZGF5LnRvRGF0ZVN0cmluZygpID09IHRhc2tkYXRlLnRvRGF0ZVN0cmluZygpKSB7XG4gICAgICAgICAgICAgICAgdG9kYXlUYXNrcy5wdXNoKHRhc2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYoIXRvZGF5VGFza3MubGVuZ3RoKSB7XG4gICAgICAgICAgICB0YXNrY29udGFpbmVyLmlubmVySFRNTCA9IFwiTm8gdGFza3Mgc2NoZWR1bGVkIGZvciB0b2RheVwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGFza2NvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xuICAgICAgICAgICAgZm9yKGxldCBlYWNodGFzayBvZiB0b2RheVRhc2tzKSB7XG4gICAgICAgICAgICAgICAgZGlzcGxheVRhc2tzT25TY3JlZW4oZWFjaHRhc2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG59IiwiaW1wb3J0IHsgYWRkTmV3UHJvamVjdCB9IGZyb20gXCIuL2FkZHJlbW92ZVByb2plY3RzXCI7XG5pbXBvcnQgeyB0YXNrcyB9IGZyb20gXCIuL2luZGV4XCI7XG5pbXBvcnQgeyBkaXNwbGF5VGFza3NPblNjcmVlbiB9IGZyb20gXCIuL3VwZGF0aW5nVGFza3NcIjtcblxuXG5jb25zdCBoZWFkaW5nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnJpZ2h0cGFuZWxoZWFkaW5nJyk7XG5cbmNvbnN0IHRhc2tjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGFza3MnKTtcblxubGV0IHdlZWtUYXNrcyA9IFtdO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzaG93V2Vla1BhZ2UodGFza3MpIHtcbiAgICBoZWFkaW5nLmlubmVySFRNTCA9IFwiVGFza3MgZm9yIHRoaXMgd2Vla1wiO1xuICAgIHRhc2tjb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcbiAgICBpZighdGFza3MubGVuZ3RoKSB7XG4gICAgICAgIHRhc2tjb250YWluZXIuaW5uZXJIVE1MID0gXCJObyBUYXNrIGhlcmUsIGFkZCBhIHByb2plY3QgYW5kIGFkZCB0YXNrcyB0byBnZXQgc3RhcnRlZFwiXG4gICAgICAgIGNvbnN0IGFkZHByb2plY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgYWRkcHJvamVjdC5pbm5lckhUTUwgPSBcIisgQWRkIFByb2plY3RcIjtcbiAgICAgICAgYWRkcHJvamVjdC5jbGFzc0xpc3QuYWRkKCdhZGRwcm9qZWN0ZnJlc2gnKTtcbiAgICAgICAgdGFza2NvbnRhaW5lci5hcHBlbmRDaGlsZChhZGRwcm9qZWN0KTtcblxuICAgICAgICBhZGRwcm9qZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYWRkTmV3UHJvamVjdCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB3ZWVrVGFza3MgPSBbXTtcbiAgICAgICAgdGFza2NvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xuICAgICAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7XG4gICAgICAgIGNvbnN0IGRheSA9IHRvZGF5LmdldERheSgpO1xuICAgICAgICBcbiAgICAgICAgY29uc3Qgc3RhcnQgPSB0b2RheS5nZXRUaW1lKCkgLSBkYXkqODY0MDAwMDA7XG4gICAgICAgIGNvbnN0IGVuZCA9IHRvZGF5LmdldFRpbWUoKSArICg3LWRheSkqODY0MDAwMDA7XG5cbiAgICAgICAgZm9yKGxldCB0YXNrIG9mIHRhc2tzKSB7XG4gICAgICAgICAgICBjb25zdCB0YXNrZGF0ZSA9IG5ldyBEYXRlKHRhc2suZGF0ZSk7XG4gICAgICAgICAgICBpZih0YXNrZGF0ZS5nZXRUaW1lKCkgPiBzdGFydCAmJiB0YXNrZGF0ZS5nZXRUaW1lKCkgPCBlbmQpIHtcbiAgICAgICAgICAgICAgICB3ZWVrVGFza3MucHVzaCh0YXNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmKCF3ZWVrVGFza3MubGVuZ3RoKSB7XG4gICAgICAgICAgICB0YXNrY29udGFpbmVyLmlubmVySFRNTCA9IFwiTm8gdGFza3Mgc2NoZWR1bGVkIGZvciB0aGlzIHdlZWtcIjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRhc2tjb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcbiAgICAgICAgICAgIGZvcihsZXQgZWFjaHRhc2sgb2Ygd2Vla1Rhc2tzKSB7XG4gICAgICAgICAgICAgICAgZGlzcGxheVRhc2tzT25TY3JlZW4oZWFjaHRhc2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSIsImltcG9ydCB7IGFkZE5ld1Byb2plY3QgfSBmcm9tIFwiLi9hZGRyZW1vdmVQcm9qZWN0c1wiO1xuaW1wb3J0IHsgdGFza3MgfSBmcm9tIFwiLi9pbmRleFwiO1xuaW1wb3J0IHsgZGlzcGxheVRhc2tzT25TY3JlZW4gfSBmcm9tIFwiLi91cGRhdGluZ1Rhc2tzXCI7XG5cbmNvbnN0IGhlYWRpbmcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucmlnaHRwYW5lbGhlYWRpbmcnKTtcblxuY29uc3QgdGFza2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50YXNrcycpO1xuXG5sZXQgaW1wb3J0YW50VGFza3MgPSBbXTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc2hvd0ltcG9ydGFudFBhZ2UodGFza3MpIHtcbiAgICBoZWFkaW5nLmlubmVySFRNTCA9IFwiSW1wb3J0YW50IFRhc2tzXCI7XG4gICAgdGFza2NvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xuICAgIGlmKCF0YXNrcy5sZW5ndGgpIHtcbiAgICAgICAgdGFza2NvbnRhaW5lci5pbm5lckhUTUwgPSBcIk5vIFRhc2sgaGVyZSwgYWRkIGEgcHJvamVjdCBhbmQgYWRkIHRhc2tzIHRvIGdldCBzdGFydGVkXCJcbiAgICAgICAgY29uc3QgYWRkcHJvamVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBhZGRwcm9qZWN0LmlubmVySFRNTCA9IFwiKyBBZGQgUHJvamVjdFwiO1xuICAgICAgICBhZGRwcm9qZWN0LmNsYXNzTGlzdC5hZGQoJ2FkZHByb2plY3RmcmVzaCcpO1xuICAgICAgICB0YXNrY29udGFpbmVyLmFwcGVuZENoaWxkKGFkZHByb2plY3QpO1xuXG4gICAgICAgIGFkZHByb2plY3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhZGROZXdQcm9qZWN0KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRhc2tjb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcbiAgICAgICAgaW1wb3J0YW50VGFza3MgPSBbXTtcbiAgICAgICAgXG4gICAgICAgIGZvcihsZXQgdGFzayBvZiB0YXNrcykge1xuICAgICAgICAgICAgY29uc3QgdGFza2RhdGUgPSBuZXcgRGF0ZSh0YXNrLmRhdGUpO1xuICAgICAgICAgICAgaWYodGFzay5pbXBvcnRhbnQgPT0gJ3llcycpIHtcbiAgICAgICAgICAgICAgICBpbXBvcnRhbnRUYXNrcy5wdXNoKHRhc2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYoIWltcG9ydGFudFRhc2tzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGFza2NvbnRhaW5lci5pbm5lckhUTUwgPSBcIk5vIHRhc2tzIG1hcmtlZCBhcyBpbXBvcnRhbnRcIjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRhc2tjb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcbiAgICAgICAgICAgIGZvcihsZXQgZWFjaHRhc2sgb2YgaW1wb3J0YW50VGFza3MpIHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5VGFza3NPblNjcmVlbihlYWNodGFzayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbn0iLCJpbXBvcnQgeyBhZGROZXdQcm9qZWN0IH0gZnJvbSBcIi4vYWRkcmVtb3ZlUHJvamVjdHNcIjtcbmltcG9ydCB7IHRhc2tzIH0gZnJvbSBcIi4vaW5kZXhcIjtcbmltcG9ydCB7IGRpc3BsYXlUYXNrc09uU2NyZWVuIH0gZnJvbSBcIi4vdXBkYXRpbmdUYXNrc1wiO1xuXG5cbmNvbnN0IGhlYWRpbmcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucmlnaHRwYW5lbGhlYWRpbmcnKTtcblxuY29uc3QgdGFza2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50YXNrcycpO1xuXG5sZXQgY29tcGxldGVkVGFza3MgPSBbXTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc2hvd0NvbXBsZXRlZFBhZ2UodGFza3MpIHtcbiAgICBoZWFkaW5nLmlubmVySFRNTCA9IFwiQ29tcGxldGVkIFRhc2tzXCI7XG4gICAgdGFza2NvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xuICAgIGlmKCF0YXNrcy5sZW5ndGgpIHtcbiAgICAgICAgdGFza2NvbnRhaW5lci5pbm5lckhUTUwgPSBcIk5vIHRhc2tzIGNvbXBsZXRlZFwiO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29tcGxldGVkVGFza3MgPSBbXTtcbiAgICAgICAgdGFza2NvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xuXG4gICAgICAgIGZvcihsZXQgdGFzayBvZiB0YXNrcykge1xuICAgICAgICAgICAgaWYodGFzay5jb21wbGV0ZWQgPT0gJ3llcycpIHtcbiAgICAgICAgICAgICAgICBjb21wbGV0ZWRUYXNrcy5wdXNoKHRhc2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYoIWNvbXBsZXRlZFRhc2tzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGFza2NvbnRhaW5lci5pbm5lckhUTUwgPSBcIk5vIHRhc2tzIGNvbXBsZXRlZFwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGFza2NvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xuICAgICAgICAgICAgZm9yKGxldCBlYWNodGFzayBvZiBjb21wbGV0ZWRUYXNrcykge1xuICAgICAgICAgICAgICAgIGRpc3BsYXlUYXNrc09uU2NyZWVuKGVhY2h0YXNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn0iLCJpbXBvcnQgc2hvd1RvZGF5UGFnZSBmcm9tIFwiLi90b2RheVwiO1xuaW1wb3J0IHsgcmVtb3ZlU2VsZWN0ZWRDbGFzcywgYWRkTmV3UHJvamVjdH0gZnJvbSBcIi4vYWRkcmVtb3ZlUHJvamVjdHNcIjtcbmltcG9ydCBzaG93V2Vla1BhZ2UgZnJvbSBcIi4vdGhpc3dlZWtcIjtcbmltcG9ydCBzaG93SW1wb3J0YW50UGFnZSBmcm9tIFwiLi9pbXBvcnRhbnRcIjtcbmltcG9ydCBzaG93Q29tcGxldGVkUGFnZSBmcm9tIFwiLi9jb21wbGV0ZWRcIjtcblxuY29uc3QgdG9kYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG9kYXknKTtcbmNvbnN0IHRoaXN3ZWVrID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RoaXN3ZWVrJyk7XG5jb25zdCBpbXBvcnRhbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW1wb3J0YW50bWVudScpO1xuY29uc3QgY29tcGxldGVkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbXBsZXRlZCcpO1xuY29uc3QgYWRkcHJvamVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGRwcm9qZWN0Jyk7XG5cblxuXG5jb25zdCBjb2xvcnMgPSBbJyNmZmFlYWUnLCAnI2ZmZWU5MycsICcjZmZjMDlmJywgJyNhMzlmZTEnLCAnI2ZjZjVjNycsICcjYTBjZWQ5JywgJyNhZGY3YjYnXTtcbmxldCB0YXNrcyA9IFtdO1xuXG5zaG93VG9kYXlQYWdlKHRhc2tzKTtcblxudG9kYXkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgcmVtb3ZlU2VsZWN0ZWRDbGFzcygpO1xuICAgIHRvZGF5LmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7XG4gICAgc2hvd1RvZGF5UGFnZSh0YXNrcyk7XG59KTtcblxudGhpc3dlZWsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgcmVtb3ZlU2VsZWN0ZWRDbGFzcygpO1xuICAgIHRoaXN3ZWVrLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7XG4gICAgc2hvd1dlZWtQYWdlKHRhc2tzKTtcbn0pO1xuXG5cbmltcG9ydGFudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICByZW1vdmVTZWxlY3RlZENsYXNzKCk7XG4gICAgaW1wb3J0YW50LmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7XG4gICAgc2hvd0ltcG9ydGFudFBhZ2UodGFza3MpO1xufSlcblxuY29tcGxldGVkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIHJlbW92ZVNlbGVjdGVkQ2xhc3MoKTtcbiAgICBjb21wbGV0ZWQuY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTtcbiAgICBzaG93Q29tcGxldGVkUGFnZSh0YXNrcyk7XG59KTtcblxuYWRkcHJvamVjdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFkZE5ld1Byb2plY3QpO1xuXG5leHBvcnQge2NvbG9ycyx0YXNrc307Il0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJnIiwiZ2xvYmFsVGhpcyIsInRoaXMiLCJGdW5jdGlvbiIsImUiLCJ3aW5kb3ciLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwic2NyaXB0VXJsIiwiaW1wb3J0U2NyaXB0cyIsImxvY2F0aW9uIiwiZG9jdW1lbnQiLCJjdXJyZW50U2NyaXB0Iiwic3JjIiwic2NyaXB0cyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwibGVuZ3RoIiwiaSIsIkVycm9yIiwicmVwbGFjZSIsInAiLCJ0YXNrY29udGFpbmVyIiwicXVlcnlTZWxlY3RvciIsImhlYWRpbmciLCJkaXNwbGF5VGFza3NPblNjcmVlbiIsInRhc2siLCJ0YXNrcm93IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsImNoZWNrYm94IiwidHlwZSIsImlkIiwibGFiZWwiLCJzZXRBdHRyaWJ1dGUiLCJpbm5lckhUTUwiLCJuYW1lIiwiaW1wb3J0YW50IiwiZGF0ZSIsImFwcGVuZENoaWxkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNvbXBsZXRlZCIsInN0eWxlIiwidGV4dERlY29yYXRpb24iLCJiYWNrZ3JvdW5kQ29sb3IiLCJjaGVja2VkIiwidXBkYXRlUGFuZWwiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY3VycmVudGx5U2VsZWN0ZWRQcm9qZWN0IiwidGFza3NJbkN1cnJlbnRseVNlbGVjdGVkUHJvamVjdCIsInRhc2tzIiwicHJvamVjdG5hbWUiLCJwdXNoIiwiZWFjaHRhc2siLCJkaXNwbGF5U3RhcnRQcm9qZWN0UGFnZSIsImNyZWF0ZVRhc2tPYmplY3QiLCJjb250YWluZXIiLCJhZGRUYXNrIiwiZmlyc3QiLCJwb3B1cCIsInByZXNlbnQiLCJyZW1vdmUiLCJmb3JtYm94IiwiYnV0dG9ucyIsImNhbmNlbCIsInRpdGxlIiwiZ2V0RWxlbWVudEJ5SWQiLCJuZXd0YXNrIiwidmFsdWUiLCJhZGRUYXNrT2JqZWN0IiwiY2xpY2siLCJzdG9wUHJvcGFnYXRpb24iLCJhZGRUYXNrUG9wdXAiLCJvcHRpb25zIiwicmVtb3ZlU2VsZWN0ZWRDbGFzcyIsImZvckVhY2giLCJvcHQiLCJyZW1vdmVBY3RpdmVDbGFzcyIsInByb2plY3RDb250YWluZXIiLCJub3RQcmVzZW50IiwiYWRkTmV3UHJvamVjdCIsImlucHV0Ym94IiwibWFyZ2luIiwicHJvamVjdGljb24iLCJjb2xvcnMiLCJvcHRpb24iLCJmb2N1cyIsImRvbmUiLCJyZW1vdmVDaGlsZCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJ0b2RheVRhc2tzIiwic2hvd1RvZGF5UGFnZSIsInRvZGF5IiwiRGF0ZSIsInRhc2tkYXRlIiwidG9EYXRlU3RyaW5nIiwiYWRkcHJvamVjdCIsIndlZWtUYXNrcyIsImltcG9ydGFudFRhc2tzIiwiY29tcGxldGVkVGFza3MiLCJ0aGlzd2VlayIsImRheSIsImdldERheSIsInN0YXJ0IiwiZ2V0VGltZSIsImVuZCIsInNob3dXZWVrUGFnZSIsInNob3dJbXBvcnRhbnRQYWdlIiwic2hvd0NvbXBsZXRlZFBhZ2UiXSwic291cmNlUm9vdCI6IiJ9